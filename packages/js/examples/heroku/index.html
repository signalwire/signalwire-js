<!DOCTYPE html>
<html>
  <head>
    <title>Signalwire Call Demo</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Cross Browser WebRTC Adapter -->
    <script
      type="text/javascript"
      src="https://webrtc.github.io/adapter/adapter-latest.js"
    ></script>

    <!-- To style up the demo a little -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
      crossorigin="anonymous"
    />
    <link
      rel="shortcut icon"
      href="https://signalwire.com/assets/images/favicon.ico"
    />
  </head>
  <body class="bg-light">
    <div class="container">
      <div class="row pt-5">
        <div class="col-12 pb-3">
          <h1>Video SDK Demo</h1>
        </div>
      </div>
      <hr />
      <div class="row py-3">
        <div class="col-12 col-md-4">
          <div class="card">
            <div class="card-body">
              <h5>Connect</h5>
              <div class="form-group">
                <label for="host">Host</label>
                <input
                  type="text"
                  class="form-control"
                  id="host"
                  placeholder="Host to use"
                  onchange="saveInLocalStorage(event)"
                />
              </div>
              <div class="form-group">
                <label for="token">Token</label>
                <input
                  type="text"
                  class="form-control"
                  id="token"
                  placeholder="Enter passwd"
                  onchange="saveInLocalStorage(event)"
                />
              </div>
              <div class="form-group">
                <div>Call Options:</div>
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="audio"
                    value="1"
                    onchange="saveInLocalStorage(event)"
                  />
                  <label class="form-check-label" for="audio">
                    Include Audio
                  </label>
                </div>
                <div class="form-check">
                  <input
                    type="checkbox"
                    id="video"
                    value="1"
                    onchange="saveInLocalStorage(event)"
                  />
                  <label class="form-check-label" for="video">
                    Include Video
                  </label>
                </div>
              </div>
              <div class="d-grid gap-2">
                <button
                  id="btnConnect"
                  class="btn btn-success"
                  onclick="connect()"
                >
                  Join Room
                </button>
                <button
                  id="btnDisconnect"
                  class="btn btn-danger d-none"
                  onclick="hangup()"
                >
                  Disconnect
                </button>
              </div>

              <div class="text-center mt-3 text-muted">
                <small
                  >Status: <span id="connectStatus">Not Connected</span></small
                >
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-8 mt-4 mt-md-1">
          <div class="row py-3">
            <div class="col-12">
              <h5>Remote Video</h5>
              <div id="rootElement"></div>
            </div>
          </div>
          <div class="row py-2">
            <div class="col-4">
              <div class="btn-group w-100" role="group">
                <button
                  id="muteSelfBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="muteSelf()"
                  disabled="true"
                >
                  Mute Self
                </button>
                <button
                  id="unmuteSelfBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="unmuteSelf()"
                  disabled="true"
                >
                  UnMute Self
                </button>
              </div>
            </div>
            <div class="col-4">
              <div class="btn-group w-100" role="group">
                <button
                  id="muteVideoSelfBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="muteVideoSelf()"
                  disabled="true"
                >
                  Video Mute Self
                </button>
                <button
                  id="unmuteVideoSelfBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="unmuteVideoSelf()"
                  disabled="true"
                >
                  Video UnMute Self
                </button>
              </div>
            </div>
            <div class="col-4">
              <div class="btn-group w-100" role="group">
                <button
                  id="hideScreenShareBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="startScreenShare()"
                  disabled="true"
                >
                  Start Screenshare
                </button>
                <button
                  id="showScreenShareBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="stopScreenShare()"
                  disabled="true"
                >
                  Stop Screenshare
                </button>
              </div>
            </div>
          </div>
          <div class="row py-2">
            <div class="col-6">
              <div class="btn-group w-100" role="group">
                <button
                  id="deafSelfBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="deafSelf()"
                  disabled="true"
                >
                  Deaf Self
                </button>
                <button
                  id="undeafSelfBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="undeafSelf()"
                  disabled="true"
                >
                  Undeaf Self
                </button>
              </div>
            </div>
            <div class="col-6">
              <div class="btn-group w-100" role="group">
                <button
                  id="hideVMutedBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="hideVideoMuted()"
                  disabled="true"
                >
                  Hide vMuted
                </button>
                <button
                  id="showVMutedBtn"
                  class="btn btn-warning px-3 mt-2 d-none"
                  onClick="showVideoMuted()"
                  disabled="true"
                >
                  Show vMuted
                </button>
              </div>
            </div>
          </div>

          <div id="controlSliders" class="row py-2 d-none">
            <div class="col-4">
              <label for="microphoneVolume" class="form-label">
                Microphone Volume
              </label>
              <input
                type="range"
                class="form-range"
                oninput="rangeInputHandler(this)"
                min="-4"
                max="4"
                value="0"
                id="microphoneVolume"
              />
            </div>
            <div class="col-4">
              <label for="speakerVolume" class="form-label">
                Speaker Volume
              </label>
              <input
                type="range"
                class="form-range"
                oninput="rangeInputHandler(this)"
                min="-4"
                max="4"
                value="0"
                id="speakerVolume"
              />
            </div>
            <div class="col-4">
              <label for="inputSensitivity" class="form-label"
                >Noise Gate</label
              >
              <input
                type="range"
                class="form-range"
                oninput="rangeInputHandler(this)"
                min="0"
                max="12"
                value="4"
                id="inputSensitivity"
              />
            </div>
          </div>

          <div id="controlLayout" class="row py-2 d-none">
            <div class="col-4">
              <label for="microphoneSelect" class="form-label">
                Microphone
              </label>
              <select
                class="form-select"
                value=""
                id="microphoneSelect"
                onchange="changeMicrophone(this)"
              ></select>
              <label for="speakerSelect" class="form-label"> Speaker </label>
              <select
                class="form-select"
                value=""
                id="speakerSelect"
                onchange="changeSpeaker(this)"
              ></select>
              <label for="cameraSelect" class="form-label"> Video </label>
              <select
                class="form-select"
                value=""
                id="cameraSelect"
                onchange="changeCamera(this)"
              ></select>
            </div>
            <div class="col-4">
              <label for="layout" class="form-label"> Change Layout </label>
              <select
                class="form-select"
                onchange="changeLayout(this)"
                value=""
                id="layout"
              ></select>
            </div>
          </div>

          <div id="controlRecording" class="row py-2 d-none">
            <h6>Recording (<i id="recordingState">unknown</i>)</h6>
            <div class="col-12">
              <div class="btn-group w-100" role="group">
                <button
                  id="startRecordingBtn"
                  class="btn btn-success px-3 mt-2 d-none"
                  onClick="startRecording()"
                  disabled="true"
                >
                  Start Recording
                </button>
                <button
                  id="pauseRecordingBtn"
                  class="btn btn-info px-3 mt-2 d-none"
                  onClick="pauseRecording()"
                  disabled="true"
                >
                  Pause Recording
                </button>
                <button
                  id="resumeRecordingBtn"
                  class="btn btn-info px-3 mt-2 d-none"
                  onClick="resumeRecording()"
                  disabled="true"
                >
                  Resume Recording
                </button>
                <button
                  id="stopRecordingBtn"
                  class="btn btn-danger px-3 mt-2 d-none"
                  onClick="stopRecording()"
                  disabled="true"
                >
                  Stop Recording
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr />
    </div>
    <script type="module" src="./index.js"></script>
  </body>
</html>
